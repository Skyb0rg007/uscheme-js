(this["webpackJsonpuscheme-js"]=this["webpackJsonpuscheme-js"]||[]).push([[0],{54:function(e,t,n){e.exports=n(77)},77:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(15),s=n.n(r),i=n(53),l=n(7),c=n(80),u=n(81),m=n(46),d=n(34),p=n(18),f=o.a.createContext({eval:function(e){return console.log("Unable to call 'eval(\"".concat(e,"\")': Context not initialized"))},reset:function(e){return console.log("Unable to call 'reset(\"".concat(e,"\")': Context not initialized"))},name:"<unnamed>",mode:"",autoCloseBrackets:"()[]{}"}),h=n(22),v=n(23),b=n(30),g=n(29),E=n(10),y=n.n(E),S=(n(64),n(41)),w=n(2),k=n.n(w),x=(k.a.node,k.a.object,k.a.string,k.a.bool,{lineHeight:"21px"}),C=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.style,a=e.className,r={message:y()(n,x)};return this.props.dangerMode?o.a.createElement("div",Object.assign({className:a,style:r.message},Object(S.a)(t))):o.a.createElement("div",{className:a,style:r.message},t)}}]),n}(a.Component),j=n(8);var O=function(e){if(e){var t=e.selectionStart,n=e.selectionEnd;setTimeout((function(){return e.setSelectionRange(t,n)}),10)}},P=function(e,t){var n,a=t.history,o=t.historyPosition,r=t.previousHistoryPosition,s=t.terminalInput,i=(n=a,Array.from(n).filter((function(e){return void 0!==e}))).reverse(),l=o,c=r,u=s.current;if(i.length>0)switch(e){case"up":var m=i[0],d=i[i.length-1],p=i[l+1];return null===l?(u.value=m,O(u),{historyPosition:0,previousHistoryPosition:null}):l+1===i.length?(u.value=d,O(u),{historyPosition:i.length-1,previousHistoryPosition:1===i.length?null:i.length-2}):(u.value=p,O(u),{historyPosition:l+1,previousHistoryPosition:l});case"down":var f=i[0],h=i[l-1];return null!==l&&i[l]?l-1===-1?(u.value=null===c||0===l&&1===c?"":f,O(u),{historyPosition:null,previousHistoryPosition:null}):(u.value=h,O(u),{historyPosition:l-1,previousHistoryPosition:l}):(u.value="",O(u),{historyPosition:null,previousHistoryPosition:null})}},N=n(42),H=n(43),T=n.n(H),I={minHeight:"300px",maxWidth:"100%",maxHeight:"100%",borderRadius:"5px",overflow:"auto",cursor:"text",backgroundColor:"#212121",backgroundSize:"cover"},M={padding:"20px",height:"100%",fontSize:"15px",color:"#FFFFFF",fontFamily:"monospace"},F={display:"inline-flex",width:"100%"},R={paddingTop:"3px",color:"#EE9C34"},A={border:"0",padding:"0 0 0 7px",margin:"0",flexGrow:"100",width:"100%",height:"22px",background:"transparent",fontSize:"15px",color:"#F0BF81",fontFamily:"monospace",outline:"none"},B={style:k.a.object,contentStyle:k.a.object,inputAreaStyle:k.a.object,promptLabelStyle:k.a.object,inputStyle:k.a.object},L={className:k.a.string,contentClassName:k.a.string,inputAreaClassName:k.a.string,promptLabelClassName:k.a.string,inputClassName:k.a.string},_={autoFocus:k.a.bool,dangerMode:k.a.bool,disabled:k.a.bool,disableOnProcess:k.a.bool,ignoreCommandCase:k.a.bool,noDefaults:k.a.bool,noEchoBack:k.a.bool,noHistory:k.a.bool,noAutoScroll:k.a.bool,noNewlineParsing:k.a.bool},Q={welcomeMessage:k.a.oneOfType([k.a.bool,k.a.arrayOf(k.a.string),k.a.string]),promptLabel:k.a.node,errorText:k.a.string},D={runCommand:k.a.func.isRequired},U={messageStyle:k.a.object,messageClassName:k.a.string},$=(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)({},B),L),_),Q),D),U),function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).focusTerminal=function(){"Range"===window.getSelection().type||a.terminalInput.current.focus()},a.scrollToBottom=function(){var e=a.terminalRoot.current;setTimeout((function(){e.scrollTop=e.scrollHeight}),1)},a.showWelcomeMessage=function(){var e=a.props.welcomeMessage;a.pushToStdout(e)},a.pushToStdout=function(e,t){var n=a.state.stdout;n.push({message:e,isEcho:(null===t||void 0===t?void 0:t.isEcho)||!1}),(null===t||void 0===t?void 0:t.rawInput)&&a.pushToHistory(t.rawInput),a.setState({stdout:n})},a.pushToHistory=function(e){var t=a.state.history;t.push(e),a.setState({history:t,historyPosition:null})},a.getStdout=function(){return(a.props.noNewlineParsing?a.state.stdout:function(e){for(var t=[],n=0;n<e.length;n++){var a,o=e[n],r=o.message,s=o.isEcho,i=T()(r),l=!s&&/\\n/g.test(i)?i.split(/\\n/g):[i],c=Object(N.a)(l);try{for(c.s();!(a=c.n()).done;){var u=a.value;t.push({message:u,isEcho:o.isEcho})}}catch(m){c.e(m)}finally{c.f()}}return t}(a.state.stdout)).map((function(e,t){return o.a.createElement(C,{key:t,content:e.message,dangerMode:a.props.dangerMode,className:e.isEcho?void 0:a.props.messageClassName,style:e.isEcho?void 0:a.props.messageStyle})}))},a.clearStdout=function(){a.setState({stdout:[]})},a.clearInput=function(){a.setState({historyPosition:null}),a.terminalInput.current.value=""},a.processCommand=function(){a.setState({processing:!0},(function(){var e=a.terminalInput.current.value;if(a.props.noHistory||a.pushToHistory(e),!a.props.noEchoBack){var t=o.a.createElement("span",null,a.props.promptLabel||"$"," ",e);a.pushToStdout(t,{isEcho:!0})}if(e){var n=a.props.runCommand(e);n&&a.pushToStdout(n)}a.setState({processing:!1},(function(){a.clearInput(),a.props.noAutoScroll||a.scrollToBottom()}))}))},a.scrollHistory=function(e){var t=a.state,n=t.history,o=t.historyPosition,r=t.previousHistoryPosition,s=P(e,{history:n,historyPosition:o,previousHistoryPosition:r,terminalInput:a.terminalInput});s&&a.setState(s)},a.handleInput=function(e){switch(e.key){case"Enter":a.processCommand();break;case"ArrowUp":a.scrollHistory("up");break;case"ArrowDown":a.scrollHistory("down");break;default:e.ctrlKey&&76===e.keyCode&&(a.clearStdout(),e.preventDefault())}},a.state={stdout:[],history:[],historyPosition:null,previousHistoryPosition:null,processing:!1},a.terminalRoot=o.a.createRef(),a.terminalInput=o.a.createRef(),a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.props.welcomeMessage&&this.showWelcomeMessage(),this.props.autoFocus&&this.focusTerminal()}},{key:"render",value:function(){var e={container:y()(this.props.style,I),content:y()(this.props.contentStyle,M),inputArea:y()(this.props.inputAreaStyle,F),promptLabel:y()(this.props.promptLabelStyle,R),input:y()(this.props.inputStyle,A)};return o.a.createElement("div",{ref:this.terminalRoot,name:"react-console-emulator",className:this.props.className,style:e.container,onClick:this.focusTerminal},o.a.createElement("div",{name:"react-console-emulator__content",className:this.props.contentClassName,style:e.content},this.getStdout(),o.a.createElement("div",{name:"react-console-emulator__inputArea",className:this.props.inputAreaClassName,style:e.inputArea},o.a.createElement("span",{name:"react-console-emulator__promptLabel",className:this.props.promptLabelClassName,style:e.promptLabel},this.props.promptLabel||"$"),o.a.createElement("input",{ref:this.terminalInput,name:"react-console-emulator__input",className:this.props.inputClassName,style:e.input,onKeyDown:this.handleInput,type:"text",autoComplete:"off",disabled:this.props.disabled||this.props.disableOnProcess&&this.state.processing}))))}}]),n}(a.Component)),W=o.a.forwardRef((function(e,t){var n=o.a.useContext(f),a=o.a.useRef();o.a.useImperativeHandle(t,(function(){return{pushToStdout:function(e){e.split("\n").forEach(a.current.pushToStdout)},clearStdout:a.current.clearStdout}}));var r="\n    Welcome to ".concat(n.name,"!\n    Use Ctrl+L to clear the terminal screen\n  ");return o.a.createElement($,{welcomeMessage:r,promptLabel:">",autoFocus:!0,noDefaults:!0,runCommand:n.eval,noNewlineParsing:!0,ref:a})})),z=n(44),J=(n(67),n(68),n(69),n(70),n(71),n(12)),q=n.n(J);q.a.defineMode("uscheme",(function(){function e(e){for(var t={},n=e.split(" "),a=0;a<n.length;++a)t[n[a]]=!0;return t}var t=e("define let letrec let* lambda if val + - * / < > = null? boolean? number? symbol? pair? function? cons car cdr println print printu hash error caar cadr cdar cddr caaar caadr cadar caddr cdaar cdadr cddar cdddr caaaar caaadr caadar caaddr cadaar cadadr caddar cadddr cdaaar cdaadr cdadar cdaddr cddaar cddadr cdddar cddddr list1 list2 list3 append reverse and or not atom? equal? o filter map app exists? all? foldr foldl newline space semicolon quotemark <= >= != max min negated mod gcd lcm list4 list5 list6 list7 list8"),n=e("define let letrec let* lambda val");function a(e,t,n){this.indent=e,this.type=t,this.prev=n}function o(e,t,n){e.indentStack=new a(t,n,e.indentStack)}var r=new RegExp(/^(?:[-+]i|[-+][01]+#*(?:\/[01]+#*)?i|[-+]?[01]+#*(?:\/[01]+#*)?@[-+]?[01]+#*(?:\/[01]+#*)?|[-+]?[01]+#*(?:\/[01]+#*)?[-+](?:[01]+#*(?:\/[01]+#*)?)?i|[-+]?[01]+#*(?:\/[01]+#*)?)(?=[()\s;"]|$)/i),s=new RegExp(/^(?:[-+]i|[-+][0-7]+#*(?:\/[0-7]+#*)?i|[-+]?[0-7]+#*(?:\/[0-7]+#*)?@[-+]?[0-7]+#*(?:\/[0-7]+#*)?|[-+]?[0-7]+#*(?:\/[0-7]+#*)?[-+](?:[0-7]+#*(?:\/[0-7]+#*)?)?i|[-+]?[0-7]+#*(?:\/[0-7]+#*)?)(?=[()\s;"]|$)/i),i=new RegExp(/^(?:[-+]i|[-+][\da-f]+#*(?:\/[\da-f]+#*)?i|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?@[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?[-+](?:[\da-f]+#*(?:\/[\da-f]+#*)?)?i|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?)(?=[()\s;"]|$)/i),l=new RegExp(/^(?:[-+]i|[-+](?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)i|[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)@[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)|[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)[-+](?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)?i|(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*))(?=[()\s;"]|$)/i);function c(e){return e.match(r)}function u(e){return e.match(s)}function m(e,t){return!0===t&&e.backUp(1),e.match(l)}function d(e){return e.match(i)}return{startState:function(){return{indentStack:null,indentation:0,mode:!1,sExprComment:!1,sExprQuote:!1}},token:function(e,a){if(null==a.indentStack&&e.sol()&&(a.indentation=e.indentation()),e.eatSpace())return null;var r=null;switch(a.mode){case"string":for(var s=!1;null!=(i=e.next());){if('"'==i&&!s){a.mode=!1;break}s=!s&&"\\"==i}r="string";break;case"comment":for(var i,l=!1;null!=(i=e.next());){if("#"==i&&l){a.mode=!1;break}l="|"==i}r="comment";break;case"s-expr-comment":if(a.mode=!1,"("!=e.peek()&&"["!=e.peek()){e.eatWhile(/[^\s\(\)\[\]]/),r="comment";break}a.sExprComment=0;default:var p=e.next();if('"'==p)a.mode="string",r="string";else if("'"==p)"("==e.peek()||"["==e.peek()?("number"!=typeof a.sExprQuote&&(a.sExprQuote=0),r="atom"):(e.eatWhile(/[\w_\-!$%&*+\.\/:<=>?@\^~]/),r="atom");else if("#"==p)if(e.eat("|"))a.mode="comment",r="comment";else if(e.eat(/[tf]/i))r="atom";else if(e.eat(";"))a.mode="s-expr-comment",r="comment";else{var f=null,h=!1,v=!0;e.eat(/[ei]/i)?h=!0:e.backUp(1),e.match(/^#b/i)?f=c:e.match(/^#o/i)?f=u:e.match(/^#x/i)?f=d:e.match(/^#d/i)?f=m:e.match(/^[-+0-9.]/,!1)?(v=!1,f=m):h||e.eat("#"),null!=f&&(v&&!h&&e.match(/^#[ei]/i),f(e)&&(r="number"))}else if(/^[-+0-9.]/.test(p)&&m(e,!0))r="number";else if(";"==p)e.skipToEnd(),r="comment";else if("("==p||"["==p){for(var b,g="",E=e.column();null!=(b=e.eat(/[^\s\(\[\;\)\]]/));)g+=b;g.length>0&&n.propertyIsEnumerable(g)?o(a,E+2,p):(e.eatSpace(),e.eol()||";"==e.peek()?o(a,E+1,p):o(a,E+e.current().length,p)),e.backUp(e.current().length-1),"number"==typeof a.sExprComment&&a.sExprComment++,"number"==typeof a.sExprQuote&&a.sExprQuote++,r="bracket"}else")"==p||"]"==p?(r="bracket",null!=a.indentStack&&a.indentStack.type==(")"==p?"(":"[")&&(!function(e){e.indentStack=e.indentStack.prev}(a),"number"==typeof a.sExprComment&&0==--a.sExprComment&&(r="comment",a.sExprComment=!1),"number"==typeof a.sExprQuote&&0==--a.sExprQuote&&(r="atom",a.sExprQuote=!1))):(e.eatWhile(/[\w_\-!$%&*+\.\/:<=>?@\^~]/),r=t&&t.propertyIsEnumerable(e.current())?"builtin":"variable")}return"number"==typeof a.sExprComment?"comment":"number"==typeof a.sExprQuote?"atom":r},indent:function(e){return null==e.indentStack?e.indentation:e.indentStack.indent},closeBrackets:{pairs:'()[]{}""'},lineComment:";;"}})),q.a.defineMIME("text/x-scheme","scheme");var K=function(e){var t=e.onCtrlEnter,n=e.value,a=e.onEdit,r=o.a.useState(null),s=Object(l.a)(r,2),i=s[0],c=s[1],u=o.a.useContext(f),m=u.mode,d=u.autoCloseBrackets;o.a.useEffect((function(){var e={"Ctrl-/":function(e){return e.toggleComment()},"Ctrl-Enter":function(e){return t(e)}};i&&i.addKeyMap(e)}),[i,t]);var p={mode:m,theme:"gruvbox-dark",smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:d};return o.a.createElement(z.Controlled,{value:n,onBeforeChange:function(e,t,n){return a(n)},options:p,editorDidMount:function(e){return c(e)}})},G=n(47),V=n(39),X=n(35),Y=n(45),Z=n(48),ee=function(e){var t=e.usemap,n=e.onAddFile,a=e.onFileSelect,r=o.a.useState(!1),s=Object(l.a)(r,2),i=s[0],c=s[1],u=o.a.useRef(null),f=function(e){e.preventDefault();var a=u.current.value;""!==a&&(t.has(a)?c(!0):n(a))};return o.a.createElement(m.a,null,o.a.createElement(d.a,null,o.a.createElement("p",null,"Files")),o.a.createElement(d.a,null,o.a.createElement(X.a,{onSubmit:f},o.a.createElement(X.a.Row,null,o.a.createElement(p.a,null,o.a.createElement(X.a.Control,{ref:u,type:"text",placeholder:"Enter filename",isInvalid:i})),o.a.createElement(p.a,null,o.a.createElement(G.a,{onClick:f},o.a.createElement(Y.a,{icon:Z.a})))))),o.a.createElement(d.a,null,o.a.createElement(V.a,null,Array.from(t).map((function(e,t){var n=Object(l.a)(e,2),r=n[0];n[1];return o.a.createElement(V.a.Item,{key:t,action:!0,onClick:function(){return a&&a(r)}},r)})))))},te=function(){var e=o.a.useState((function(){var e=window.localStorage.getItem("usemap1");console.log("m = ".concat(e)),e=e?new Map(Object.entries(JSON.parse(e))):new Map,console.log("m = ".concat(e));var t=new URLSearchParams(window.location.search).get("initialContent");return new Map([].concat(Object(i.a)(e),[["main.scm",t||"\n;; main.scm\n;;\n;; Quick Tutorial:\n;;   Enter code here\n;;   Hit Ctrl+Enter to run current file\n;;   Add files/switch between files on the left\n;;   Running a file resets the environment,\n;;     to use multiple files use 'use'\n;;   Save your work! The 'main.scm' file does NOT persist!\n;;   Have fun and don't cause infinite 'use' loops!\n"]]))})),t=Object(l.a)(e,2),n=t[0],a=t[1];o.a.useEffect((function(){window.localStorage.setItem("usemap1",JSON.stringify(Object.fromEntries(n.entries())))}),[n]),o.a.useEffect((function(){window.clearFiles=function(){return a(new Map)},window.deleteFile=function(e){var t=new Map(n);t.delete(e),a(t)}}),[n,a]);var r=o.a.useRef(null),s=o.a.useState("main.scm"),h=Object(l.a)(s,2),v=h[0],b=h[1],g=n.get(v),E=function(e){var t=o.a.useState((function(){return window.uscheme.make_interp()})),n=Object(l.a)(t,2),a=n[0],r=n[1],s=function(t){return e.has(t)?e.get(t):"\0"};return{eval:function(e){return a([s,e])},resetEval:function(e){var t=window.uscheme.make_interp();return r((function(){return t})),t([s,e])},name:"uscheme",mode:"uscheme",autoCloseBrackets:"()[]{}"}}(n);return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{bg:"light",expand:"lg"},o.a.createElement(c.a.Brand,null,"Comp 105"),o.a.createElement(u.a,null,o.a.createElement(m.a,null))),o.a.createElement(d.a,null,o.a.createElement(p.a,{xs:2},o.a.createElement(ee,{usemap:n,onAddFile:function(e){a(new Map(n).set(e,";; ".concat(e,"\n;; Enter code here")))},onFileSelect:b})),o.a.createElement(p.a,null,o.a.createElement(m.a,null,o.a.createElement(f.Provider,{value:E},o.a.createElement(d.a,null,o.a.createElement(p.a,null,o.a.createElement(K,{value:g,onEdit:function(e){return a(new Map(n).set(v,e))},onCtrlEnter:function(){return r.current&&r.current.pushToStdout(E.resetEval(g))}})),o.a.createElement(p.a,null,o.a.createElement(W,{ref:r}))))))))};n(76);s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(te,null)),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.80f1fae7.chunk.js.map